import{r as x,R as P,j as n,i as me,L as be,o as ve}from"../chunks/chunk-fOMMVUP3.js";import{L as y}from"../chunks/chunk-C1ItYOn6.js";/* empty css                      */import{N as Ce,W as Ee}from"../chunks/chunk-Bq9g84Kh.js";/* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      */import"../chunks/chunk-DUlBG_JO.js";/* empty css                      *//* empty css                      *//* empty css                      */var z={exports:{}},M,se;function Ae(){if(se)return M;se=1;var s="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return M=s,M}var B,le;function De(){if(le)return B;le=1;var s=Ae();function e(){}function l(){}return l.resetWarningCache=e,B=function(){function r(d,p,g,c,j,m){if(m!==s){var b=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw b.name="Invariant Violation",b}}r.isRequired=r;function o(){return r}var i={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:o,element:r,elementType:r,instanceOf:o,node:r,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:l,resetWarningCache:e};return i.PropTypes=i,i},B}var re;function Te(){return re||(re=1,z.exports=De()()),z.exports}var ie=Te();function X(s){return e=>!!e.type&&e.type.tabsRole===s}const N=X("Tab"),_=X("TabList"),q=X("TabPanel");function ke(s){return N(s)||_(s)||q(s)}function G(s,e){return x.Children.map(s,l=>l===null?null:ke(l)?e(l):l.props&&l.props.children&&typeof l.props.children=="object"?x.cloneElement(l,Object.assign({},l.props,{children:G(l.props.children,e)})):l)}function O(s,e){return x.Children.forEach(s,l=>{l!==null&&(N(l)||q(l)?e(l):l.props&&l.props.children&&typeof l.props.children=="object"&&(_(l)&&e(l),O(l.props.children,e)))})}function ce(s,e,l){let r,o=0,i=0,d=!1;const p=[],g=s[e];return O(g,c=>{_(c)&&(c.props&&c.props.children&&typeof c.props.children=="object"&&O(c.props.children,j=>p.push(j)),d&&(r=new Error("Found multiple 'TabList' components inside 'Tabs'. Only one is allowed.")),d=!0),N(c)?((!d||p.indexOf(c)===-1)&&(r=new Error("Found a 'Tab' component outside of the 'TabList' component. 'Tab' components have to be inside the 'TabList' component.")),o++):q(c)&&i++}),!r&&o!==i&&(r=new Error(`There should be an equal number of 'Tab' and 'TabPanel' in \`${l}\`. Received ${o} 'Tab' and ${i} 'TabPanel'.`)),r}function Se(s,e,l,r,o){const i=s[e],d=o||e;let p=null;return i&&typeof i!="function"?p=new Error(`Invalid ${r} \`${d}\` of type \`${typeof i}\` supplied to \`${l}\`, expected \`function\`.`):s.selectedIndex!=null&&i==null&&(p=new Error(`The ${r} \`${d}\` is marked as required in \`${l}\`, but its value is \`undefined\` or \`null\`.
\`onSelect\` is required when \`selectedIndex\` is also set. Not doing so will make the tabs not do anything, as \`selectedIndex\` indicates that you want to handle the selected tab yourself.
If you only want to set the inital tab replace \`selectedIndex\` with \`defaultIndex\`.`)),p}function we(s,e,l,r,o){const i=s[e],d=o||e;let p=null;if(i!=null&&typeof i!="number")p=new Error(`Invalid ${r} \`${d}\` of type \`${typeof i}\` supplied to \`${l}\`, expected \`number\`.`);else if(s.defaultIndex!=null&&i!=null)return new Error(`The ${r} \`${d}\` cannot be used together with \`defaultIndex\` in \`${l}\`.
Either remove \`${d}\` to let \`${l}\` handle the selected tab internally or remove \`defaultIndex\` to handle it yourself.`);return p}function de(s){var e,l,r="";if(typeof s=="string"||typeof s=="number")r+=s;else if(typeof s=="object")if(Array.isArray(s)){var o=s.length;for(e=0;e<o;e++)s[e]&&(l=de(s[e]))&&(r&&(r+=" "),r+=l)}else for(l in s)s[l]&&(r&&(r+=" "),r+=l);return r}function V(){for(var s,e,l=0,r="",o=arguments.length;l<o;l++)(s=arguments[l])&&(e=de(s))&&(r&&(r+=" "),r+=e);return r}function pe(s){let e=0;return O(s,l=>{N(l)&&e++}),e}const Fe=["children","className","disabledTabClassName","domRef","focus","forceRenderTabPanel","onSelect","selectedIndex","selectedTabClassName","selectedTabPanelClassName","environment","disableUpDownKeys","disableLeftRightKeys"];function Pe(s,e){if(s==null)return{};var l={};for(var r in s)if({}.hasOwnProperty.call(s,r)){if(e.includes(r))continue;l[r]=s[r]}return l}function he(s){return s&&"getAttribute"in s}function te(s){return he(s)&&s.getAttribute("data-rttab")}function T(s){return he(s)&&s.getAttribute("aria-disabled")==="true"}let L;function Ie(s){const e=s||(typeof window<"u"?window:void 0);try{L=!!(typeof e<"u"&&e.document&&e.document.activeElement)}catch{L=!1}}const Ne={className:"react-tabs",focus:!1},Re={children:ce},$e=s=>{ie.checkPropTypes(Re,s,"prop","UncontrolledTabs");let e=x.useRef([]),l=x.useRef([]);const r=x.useRef();function o(t,a){if(t<0||t>=c())return;const{onSelect:h,selectedIndex:S}=s;h(t,S,a)}function i(t){const a=c();for(let h=t+1;h<a;h++)if(!T(j(h)))return h;for(let h=0;h<t;h++)if(!T(j(h)))return h;return t}function d(t){let a=t;for(;a--;)if(!T(j(a)))return a;for(a=c();a-- >t;)if(!T(j(a)))return a;return t}function p(){const t=c();for(let a=0;a<t;a++)if(!T(j(a)))return a;return null}function g(){let t=c();for(;t--;)if(!T(j(t)))return t;return null}function c(){const{children:t}=s;return pe(t)}function j(t){return e.current[`tabs-${t}`]}function m(){let t=0;const{children:a,disabledTabClassName:h,focus:S,forceRenderTabPanel:u,selectedIndex:v,selectedTabClassName:C,selectedTabPanelClassName:Y,environment:J}=s;l.current=l.current||[];let ye=l.current.length-c();const fe=x.useId();for(;ye++<0;)l.current.push(`${fe}${l.current.length}`);return G(a,D=>{let U=D;if(_(D)){let A=0,Q=!1;L==null&&Ie(J);const Z=J||(typeof window<"u"?window:void 0);L&&Z&&(Q=P.Children.toArray(D.props.children).filter(N).some((ee,W)=>Z.document.activeElement===j(W))),U=x.cloneElement(D,{children:G(D.props.children,ee=>{const W=`tabs-${A}`,ne=v===A,H={tabRef:ge=>{e.current[W]=ge},id:l.current[A],selected:ne,focus:ne&&(S||Q)};return C&&(H.selectedClassName=C),h&&(H.disabledClassName=h),A++,x.cloneElement(ee,H)})})}else if(q(D)){const A={id:l.current[t],selected:v===t};u&&(A.forceRender=u),Y&&(A.selectedClassName=Y),t++,U=x.cloneElement(D,A)}return U})}function b(t){const{direction:a,disableUpDownKeys:h,disableLeftRightKeys:S}=s;if(f(t.target)){let{selectedIndex:u}=s,v=!1,C=!1;(t.code==="Space"||t.keyCode===32||t.code==="Enter"||t.keyCode===13)&&(v=!0,C=!1,k(t)),!S&&(t.keyCode===37||t.code==="ArrowLeft")||!h&&(t.keyCode===38||t.code==="ArrowUp")?(a==="rtl"?u=i(u):u=d(u),v=!0,C=!0):!S&&(t.keyCode===39||t.code==="ArrowRight")||!h&&(t.keyCode===40||t.code==="ArrowDown")?(a==="rtl"?u=d(u):u=i(u),v=!0,C=!0):t.keyCode===35||t.code==="End"?(u=g(),v=!0,C=!0):(t.keyCode===36||t.code==="Home")&&(u=p(),v=!0,C=!0),v&&t.preventDefault(),C&&o(u,t)}}function k(t){let a=t.target;do if(f(a)){if(T(a))return;const h=[].slice.call(a.parentNode.children).filter(te).indexOf(a);o(h,t);return}while((a=a.parentNode)!=null)}function f(t){if(!te(t))return!1;let a=t.parentElement;do{if(a===r.current)return!0;if(a.getAttribute("data-rttabs"))break;a=a.parentElement}while(a);return!1}const E=Object.assign({},Ne,s),{className:I,domRef:R}=E,ue=Pe(E,Fe);return P.createElement("div",Object.assign({},ue,{className:V(I),onClick:k,onKeyDown:b,ref:t=>{r.current=t,R&&R(t)},"data-rttabs":!0}),m())},Oe=["children","defaultFocus","defaultIndex","focusTabOnClick","onSelect"];function Le(s,e){if(s==null)return{};var l={};for(var r in s)if({}.hasOwnProperty.call(s,r)){if(e.includes(r))continue;l[r]=s[r]}return l}const _e=0,$=1,qe={children:ce,onSelect:Se,selectedIndex:we},Ve={defaultFocus:!1,focusTabOnClick:!0,forceRenderTabPanel:!1,selectedIndex:null,defaultIndex:null,environment:null,disableUpDownKeys:!1,disableLeftRightKeys:!1},Ue=s=>s.selectedIndex===null?$:_e,xe=s=>{ie.checkPropTypes(qe,s,"prop","Tabs");const e=Object.assign({},Ve,s),{children:l,defaultFocus:r,defaultIndex:o,focusTabOnClick:i,onSelect:d}=e,p=Le(e,Oe),[g,c]=x.useState(r),[j]=x.useState(Ue(p)),[m,b]=x.useState(j===$?o||0:null);if(x.useEffect(()=>{c(!1)},[]),j===$){const E=pe(l);x.useEffect(()=>{if(m!=null){const I=Math.max(0,E-1);b(Math.min(m,I))}},[E])}const k=(E,I,R)=>{typeof d=="function"&&d(E,I,R)===!1||(i&&c(!0),j===$&&b(E))};let f=Object.assign({},s,p);return f.focus=g,f.onSelect=k,m!=null&&(f.selectedIndex=m),delete f.defaultFocus,delete f.defaultIndex,delete f.focusTabOnClick,P.createElement($e,f,l)};xe.tabsRole="Tabs";const We=["children","className"];function He(s,e){if(s==null)return{};var l={};for(var r in s)if({}.hasOwnProperty.call(s,r)){if(e.includes(r))continue;l[r]=s[r]}return l}const ze={className:"react-tabs__tab-list"},je=s=>{const e=Object.assign({},ze,s),{children:l,className:r}=e,o=He(e,We);return P.createElement("ul",Object.assign({},o,{className:V(r),role:"tablist"}),l)};je.tabsRole="TabList";const Me=["children","className","disabled","disabledClassName","focus","id","selected","selectedClassName","tabIndex","tabRef"];function Be(s,e){if(s==null)return{};var l={};for(var r in s)if({}.hasOwnProperty.call(s,r)){if(e.includes(r))continue;l[r]=s[r]}return l}const K="react-tabs__tab",Ke={className:K,disabledClassName:`${K}--disabled`,focus:!1,id:null,selected:!1,selectedClassName:`${K}--selected`},w=s=>{let e=x.useRef();const l=Object.assign({},Ke,s),{children:r,className:o,disabled:i,disabledClassName:d,focus:p,id:g,selected:c,selectedClassName:j,tabIndex:m,tabRef:b}=l,k=Be(l,Me);return x.useEffect(()=>{c&&p&&e.current.focus()},[c,p]),P.createElement("li",Object.assign({},k,{className:V(o,{[j]:c,[d]:i}),ref:f=>{e.current=f,b&&b(f)},role:"tab",id:`tab${g}`,"aria-selected":c?"true":"false","aria-disabled":i?"true":"false","aria-controls":`panel${g}`,tabIndex:m||(c?"0":null),"data-rttab":!0}),r)};w.tabsRole="Tab";const Ge=["children","className","forceRender","id","selected","selectedClassName"];function Xe(s,e){if(s==null)return{};var l={};for(var r in s)if({}.hasOwnProperty.call(s,r)){if(e.includes(r))continue;l[r]=s[r]}return l}const ae="react-tabs__tab-panel",Ye={className:ae,forceRender:!1,selectedClassName:`${ae}--selected`},F=s=>{const e=Object.assign({},Ye,s),{children:l,className:r,forceRender:o,id:i,selected:d,selectedClassName:p}=e,g=Xe(e,Ge);return P.createElement("div",Object.assign({},g,{className:V(r,{[p]:d}),role:"tabpanel",id:`panel${i}`,"aria-labelledby":`tab${i}`}),o||d?l:null)};F.tabsRole="TabPanel";const Je=[{pageSectionId:"add-vike-server-to-an-existing-vike-app",pageSectionLevel:2,pageSectionTitle:"Add `vike-server` to an existing Vike app"},{pageSectionId:"deployment",pageSectionLevel:2,pageSectionTitle:"Deployment"},{pageSectionId:"custom-pagecontext",pageSectionLevel:2,pageSectionTitle:"Custom `pageContext`"},{pageSectionId:"standalone",pageSectionLevel:2,pageSectionTitle:"Standalone"},{pageSectionId:"compression",pageSectionLevel:2,pageSectionTitle:"Compression"},{pageSectionId:"https",pageSectionLevel:2,pageSectionTitle:"HTTPS"},{pageSectionId:"see-also",pageSectionLevel:2,pageSectionTitle:"See also"}];function oe(s){const e={a:"a",blockquote:"blockquote",br:"br",code:"code",figure:"figure",li:"li",p:"p",pre:"pre",span:"span",ul:"ul",...s.components};return n.jsxs(n.Fragment,{children:[n.jsxs(Ce,{icon:n.jsx(e.span,{style:{fontSize:"1.1em"},children:"⚗️"}),children:[n.jsx(e.code,{children:"vike-server"})," will be released very shortly (ETA this week). In the meantime, see ",n.jsx(y,{href:"/integration#server-manual-integration",doNotInferSectionTitle:!0})," instead."]}),`
`,n.jsxs(e.p,{children:["We recommend using the Vike extension ",n.jsx(e.code,{children:"vike-server"})," which comes with many benefits such as:"]}),`
`,n.jsxs(e.ul,{children:[`
`,n.jsx(e.li,{children:"Out-of-the-box support for popular servers (Express, Hono, Hattip, Elysia, etc.)"}),`
`,n.jsx(e.li,{children:"Out-of-the-box support for popular deployments (Cloudflare, Vercel, Netlify, etc.)"}),`
`,n.jsx(e.li,{children:"HMR"}),`
`]}),`
`,n.jsxs(e.p,{children:["Version history: ",n.jsx(e.a,{href:"https://github.com/vikejs/vike-server/blob/main/packages/vike-server/CHANGELOG.md",children:n.jsx(e.code,{children:"CHANGELOG.md"})}),n.jsx(e.br,{}),`
`,"Examples: ",n.jsx(e.a,{href:"https://batijs.dev",children:"Bati"})," and ",n.jsx(e.a,{href:"https://github.com/vikejs/vike-server/tree/main/examples",children:n.jsx(e.code,{children:"examples/"})}),n.jsx(e.br,{}),`
`,"Source code: ",n.jsxs(e.a,{href:"https://github.com/vikejs/vike-server",children:["GitHub > ",n.jsx(e.code,{children:"vikejs/vike-server"})]})]}),`
`,n.jsxs(e.p,{children:["The documentation of ",n.jsx(e.code,{children:"vike-server"})," is on this page."]}),`
`,n.jsxs(e.p,{children:["Getting started: ",n.jsx(y,{href:"#add-vike-server-to-an-existing-vike-app"}),"."]}),`
`,n.jsxs(e.blockquote,{children:[`
`,n.jsxs(e.p,{children:["Alternatively, instead of using a server, you can ",n.jsx(y,{href:"/pre-rendering",children:"pre-render"})," your pages and deploy to a ",n.jsx(y,{href:"/static-hosts",children:"static host"}),"."]}),`
`]}),`
`,n.jsxs(e.blockquote,{children:[`
`,n.jsxs(e.p,{children:["If you want more control over server integration, see ",n.jsx(y,{href:"/integration#server-manual-integration",doNotInferSectionTitle:!0})," instead."]}),`
`]}),`
`,n.jsxs("h2",{id:"add-vike-server-to-an-existing-vike-app",children:["Add ",n.jsx("code",{children:"vike-server"})," to an existing Vike app"]}),`
`,n.jsxs(e.p,{children:["To add ",n.jsx(e.code,{children:"vike-server"})," to an existing Vike app: install the ",n.jsx(e.code,{children:"vike-server"})," npm package (e.g. ",n.jsx(e.code,{children:"$ npm install vike-server"}),") then extend your existing ",n.jsx(y,{href:"/config#files",children:"+config.js"})," file (or create one) with ",n.jsx(e.code,{children:"vike-server"}),":"]}),`
`,n.jsx(e.figure,{"data-rehype-pretty-code-figure":"",children:n.jsx(e.pre,{className:"has-diff",style:{backgroundColor:"#fff",color:"#24292e"},tabIndex:"0","data-language":"js","data-theme":"github-light",children:n.jsxs(e.code,{"data-language":"js","data-theme":"github-light",style:{display:"grid"},children:[n.jsx(e.span,{"data-line":"",children:n.jsx(e.span,{style:{color:"#6A737D"},children:"// +config.js"})}),`
`,n.jsxs(e.span,{className:"diff add","data-line":"",children:[n.jsx(e.span,{style:{color:"#D73A49"},children:"import"}),n.jsx(e.span,{style:{color:"#24292E"},children:" vikeServer "}),n.jsx(e.span,{style:{color:"#D73A49"},children:"from"}),n.jsx(e.span,{style:{color:"#032F62"},children:" 'vike-server/config'"})]}),`
`,n.jsx(e.span,{"data-line":"",children:" "}),`
`,n.jsxs(e.span,{"data-line":"",children:[n.jsx(e.span,{style:{color:"#D73A49"},children:"export"}),n.jsx(e.span,{style:{color:"#D73A49"},children:" const"}),n.jsx(e.span,{style:{color:"#005CC5"},children:" config"}),n.jsx(e.span,{style:{color:"#D73A49"},children:" ="}),n.jsx(e.span,{style:{color:"#24292E"},children:" {"})]}),`
`,n.jsx(e.span,{className:"diff add","data-line":"",children:n.jsx(e.span,{style:{color:"#24292E"},children:"  extends: [vikeServer],  "})}),`
`,n.jsx(e.span,{"data-line":"",children:n.jsx(e.span,{style:{color:"#6A737D"},children:"  // Points to your server entry"})}),`
`,n.jsxs(e.span,{className:"diff add","data-line":"",children:[n.jsx(e.span,{style:{color:"#24292E"},children:"  server: "}),n.jsx(e.span,{style:{color:"#032F62"},children:"'server/index.js'"})]}),`
`,n.jsx(e.span,{"data-line":"",children:n.jsx(e.span,{style:{color:"#24292E"},children:"}"})})]})})}),`
`,n.jsxs(e.p,{children:["Update your production ",n.jsx(e.code,{children:"script"})," in ",n.jsx(e.code,{children:"package.json"}),":"]}),`
`,n.jsx(e.figure,{"data-rehype-pretty-code-figure":"",children:n.jsx(e.pre,{className:"has-diff",style:{backgroundColor:"#fff",color:"#24292e"},tabIndex:"0","data-language":"json","data-theme":"github-light",children:n.jsxs(e.code,{"data-language":"json","data-theme":"github-light",style:{display:"grid"},children:[n.jsx(e.span,{"data-line":"",children:n.jsx(e.span,{style:{color:"#6A737D"},children:"// package.json"})}),`
`,n.jsx(e.span,{"data-line":"",children:" "}),`
`,n.jsxs(e.span,{"data-line":"",children:[n.jsx(e.span,{style:{color:"#032F62"},children:'"scripts"'}),n.jsx(e.span,{style:{color:"#24292E"},children:": {"})]}),`
`,n.jsxs(e.span,{"data-line":"",children:[n.jsx(e.span,{style:{color:"#005CC5"},children:'  "dev"'}),n.jsx(e.span,{style:{color:"#24292E"},children:": "}),n.jsx(e.span,{style:{color:"#032F62"},children:'"vike dev"'}),n.jsx(e.span,{style:{color:"#24292E"},children:","})]}),`
`,n.jsxs(e.span,{"data-line":"",children:[n.jsx(e.span,{style:{color:"#005CC5"},children:'  "build"'}),n.jsx(e.span,{style:{color:"#24292E"},children:": "}),n.jsx(e.span,{style:{color:"#032F62"},children:'"vike build"'}),n.jsx(e.span,{style:{color:"#24292E"},children:","})]}),`
`,n.jsxs(e.span,{className:"diff add","data-line":"",children:[n.jsx(e.span,{style:{color:"#005CC5"},children:'  "prod"'}),n.jsx(e.span,{style:{color:"#24292E"},children:": "}),n.jsx(e.span,{style:{color:"#032F62"},children:'"NODE_ENV=production node dist/server/index.js"'})]}),`
`,n.jsx(e.span,{"data-line":"",children:n.jsx(e.span,{style:{color:"#24292E"},children:"}"})})]})})}),`
`,n.jsx(e.p,{children:"Create (or update) your server entry:"}),`
`,n.jsxs(xe,{children:[n.jsxs(je,{children:[n.jsx(w,{children:"Express.js"}),n.jsx(w,{children:"Hono"}),n.jsx(w,{children:"Fastify"}),n.jsx(w,{children:"H3"}),n.jsx(w,{children:"Elysia"})]}),n.jsx(F,{children:n.jsx(e.figure,{"data-rehype-pretty-code-figure":"",children:n.jsx(e.pre,{style:{backgroundColor:"#fff",color:"#24292e"},tabIndex:"0","data-language":"js","data-theme":"github-light",children:n.jsxs(e.code,{"data-language":"js","data-theme":"github-light",style:{display:"grid"},children:[n.jsx(e.span,{"data-line":"",children:n.jsx(e.span,{style:{color:"#6A737D"},children:"// server/index.js"})}),`
`,n.jsx(e.span,{"data-line":"",children:" "}),`
`,n.jsxs(e.span,{"data-line":"",children:[n.jsx(e.span,{style:{color:"#D73A49"},children:"import"}),n.jsx(e.span,{style:{color:"#24292E"},children:" express "}),n.jsx(e.span,{style:{color:"#D73A49"},children:"from"}),n.jsx(e.span,{style:{color:"#032F62"},children:" 'express'"})]}),`
`,n.jsx(e.span,{"data-line":"",children:n.jsx(e.span,{style:{color:"#6A737D"},children:"// apply() installs Vike's middlewares onto the server"})}),`
`,n.jsxs(e.span,{"data-line":"",children:[n.jsx(e.span,{style:{color:"#D73A49"},children:"import"}),n.jsx(e.span,{style:{color:"#24292E"},children:" { apply } "}),n.jsx(e.span,{style:{color:"#D73A49"},children:"from"}),n.jsx(e.span,{style:{color:"#032F62"},children:" 'vike-server/express'"})]}),`
`,n.jsx(e.span,{"data-line":"",children:n.jsx(e.span,{style:{color:"#6A737D"},children:"// serve() allows a unique file to target Node.js, Cloudflare, Vercel, Deno, Bun, etc..."})}),`
`,n.jsxs(e.span,{"data-line":"",children:[n.jsx(e.span,{style:{color:"#D73A49"},children:"import"}),n.jsx(e.span,{style:{color:"#24292E"},children:" { serve } "}),n.jsx(e.span,{style:{color:"#D73A49"},children:"from"}),n.jsx(e.span,{style:{color:"#032F62"},children:" 'vike-server/express/serve'"})]}),`
`,n.jsx(e.span,{"data-line":"",children:" "}),`
`,n.jsxs(e.span,{"data-line":"",children:[n.jsx(e.span,{style:{color:"#D73A49"},children:"function"}),n.jsx(e.span,{style:{color:"#6F42C1"},children:" startServer"}),n.jsx(e.span,{style:{color:"#24292E"},children:"() {"})]}),`
`,n.jsxs(e.span,{"data-line":"",children:[n.jsx(e.span,{style:{color:"#D73A49"},children:"  const"}),n.jsx(e.span,{style:{color:"#005CC5"},children:" app"}),n.jsx(e.span,{style:{color:"#D73A49"},children:" ="}),n.jsx(e.span,{style:{color:"#6F42C1"},children:" express"}),n.jsx(e.span,{style:{color:"#24292E"},children:"()"})]}),`
`,n.jsxs(e.span,{"data-line":"",children:[n.jsx(e.span,{style:{color:"#6F42C1"},children:"  apply"}),n.jsx(e.span,{style:{color:"#24292E"},children:"(app)"})]}),`
`,n.jsxs(e.span,{"data-line":"",children:[n.jsx(e.span,{style:{color:"#D73A49"},children:"  const"}),n.jsx(e.span,{style:{color:"#005CC5"},children:" port"}),n.jsx(e.span,{style:{color:"#D73A49"},children:" ="}),n.jsx(e.span,{style:{color:"#005CC5"},children:" 3000"})]}),`
`,n.jsx(e.span,{"data-line":"",children:n.jsx(e.span,{style:{color:"#6A737D"},children:"  // port is only used when running on non-serverless environments"})}),`
`,n.jsxs(e.span,{"data-line":"",children:[n.jsx(e.span,{style:{color:"#D73A49"},children:"  return"}),n.jsx(e.span,{style:{color:"#6F42C1"},children:" serve"}),n.jsx(e.span,{style:{color:"#24292E"},children:"(app, { port })"})]}),`
`,n.jsx(e.span,{"data-line":"",children:n.jsx(e.span,{style:{color:"#24292E"},children:"}"})}),`
`,n.jsx(e.span,{"data-line":"",children:" "}),`
`,n.jsxs(e.span,{"data-line":"",children:[n.jsx(e.span,{style:{color:"#D73A49"},children:"export"}),n.jsx(e.span,{style:{color:"#D73A49"},children:" default"}),n.jsx(e.span,{style:{color:"#6F42C1"},children:" startServer"}),n.jsx(e.span,{style:{color:"#24292E"},children:"()"})]})]})})})}),n.jsx(F,{children:n.jsx(e.figure,{"data-rehype-pretty-code-figure":"",children:n.jsx(e.pre,{style:{backgroundColor:"#fff",color:"#24292e"},tabIndex:"0","data-language":"js","data-theme":"github-light",children:n.jsxs(e.code,{"data-language":"js","data-theme":"github-light",style:{display:"grid"},children:[n.jsx(e.span,{"data-line":"",children:n.jsx(e.span,{style:{color:"#6A737D"},children:"// server/index.js"})}),`
`,n.jsx(e.span,{"data-line":"",children:" "}),`
`,n.jsxs(e.span,{"data-line":"",children:[n.jsx(e.span,{style:{color:"#D73A49"},children:"import"}),n.jsx(e.span,{style:{color:"#24292E"},children:" { Hono } "}),n.jsx(e.span,{style:{color:"#D73A49"},children:"from"}),n.jsx(e.span,{style:{color:"#032F62"},children:" 'hono'"})]}),`
`,n.jsx(e.span,{"data-line":"",children:n.jsx(e.span,{style:{color:"#6A737D"},children:"// apply() installs Vike's middlewares onto the server"})}),`
`,n.jsxs(e.span,{"data-line":"",children:[n.jsx(e.span,{style:{color:"#D73A49"},children:"import"}),n.jsx(e.span,{style:{color:"#24292E"},children:" { apply } "}),n.jsx(e.span,{style:{color:"#D73A49"},children:"from"}),n.jsx(e.span,{style:{color:"#032F62"},children:" 'vike-server/hono'"})]}),`
`,n.jsx(e.span,{"data-line":"",children:n.jsx(e.span,{style:{color:"#6A737D"},children:"// serve() allows a unique file to target Node.js, Cloudflare, Vercel, Deno, Bun, etc..."})}),`
`,n.jsxs(e.span,{"data-line":"",children:[n.jsx(e.span,{style:{color:"#D73A49"},children:"import"}),n.jsx(e.span,{style:{color:"#24292E"},children:" { serve } "}),n.jsx(e.span,{style:{color:"#D73A49"},children:"from"}),n.jsx(e.span,{style:{color:"#032F62"},children:" 'vike-server/hono/serve'"})]}),`
`,n.jsx(e.span,{"data-line":"",children:" "}),`
`,n.jsxs(e.span,{"data-line":"",children:[n.jsx(e.span,{style:{color:"#D73A49"},children:"function"}),n.jsx(e.span,{style:{color:"#6F42C1"},children:" startServer"}),n.jsx(e.span,{style:{color:"#24292E"},children:"() {"})]}),`
`,n.jsxs(e.span,{"data-line":"",children:[n.jsx(e.span,{style:{color:"#D73A49"},children:"  const"}),n.jsx(e.span,{style:{color:"#005CC5"},children:" app"}),n.jsx(e.span,{style:{color:"#D73A49"},children:" ="}),n.jsx(e.span,{style:{color:"#D73A49"},children:" new"}),n.jsx(e.span,{style:{color:"#6F42C1"},children:" Hono"}),n.jsx(e.span,{style:{color:"#24292E"},children:"()"})]}),`
`,n.jsxs(e.span,{"data-line":"",children:[n.jsx(e.span,{style:{color:"#6F42C1"},children:"  apply"}),n.jsx(e.span,{style:{color:"#24292E"},children:"(app)"})]}),`
`,n.jsxs(e.span,{"data-line":"",children:[n.jsx(e.span,{style:{color:"#D73A49"},children:"  const"}),n.jsx(e.span,{style:{color:"#005CC5"},children:" port"}),n.jsx(e.span,{style:{color:"#D73A49"},children:" ="}),n.jsx(e.span,{style:{color:"#005CC5"},children:" 3000"})]}),`
`,n.jsx(e.span,{"data-line":"",children:n.jsx(e.span,{style:{color:"#6A737D"},children:"  // port is only used when running on non-serverless environments"})}),`
`,n.jsxs(e.span,{"data-line":"",children:[n.jsx(e.span,{style:{color:"#D73A49"},children:"  return"}),n.jsx(e.span,{style:{color:"#6F42C1"},children:" serve"}),n.jsx(e.span,{style:{color:"#24292E"},children:"(app, { port })"})]}),`
`,n.jsx(e.span,{"data-line":"",children:n.jsx(e.span,{style:{color:"#24292E"},children:"}"})}),`
`,n.jsx(e.span,{"data-line":"",children:" "}),`
`,n.jsxs(e.span,{"data-line":"",children:[n.jsx(e.span,{style:{color:"#D73A49"},children:"export"}),n.jsx(e.span,{style:{color:"#D73A49"},children:" default"}),n.jsx(e.span,{style:{color:"#6F42C1"},children:" startServer"}),n.jsx(e.span,{style:{color:"#24292E"},children:"()"})]})]})})})}),n.jsx(F,{children:n.jsx(e.figure,{"data-rehype-pretty-code-figure":"",children:n.jsx(e.pre,{style:{backgroundColor:"#fff",color:"#24292e"},tabIndex:"0","data-language":"js","data-theme":"github-light",children:n.jsxs(e.code,{"data-language":"js","data-theme":"github-light",style:{display:"grid"},children:[n.jsx(e.span,{"data-line":"",children:n.jsx(e.span,{style:{color:"#6A737D"},children:"// server/index.js"})}),`
`,n.jsx(e.span,{"data-line":"",children:" "}),`
`,n.jsxs(e.span,{"data-line":"",children:[n.jsx(e.span,{style:{color:"#D73A49"},children:"import"}),n.jsx(e.span,{style:{color:"#24292E"},children:" fastify "}),n.jsx(e.span,{style:{color:"#D73A49"},children:"from"}),n.jsx(e.span,{style:{color:"#032F62"},children:" 'fastify'"})]}),`
`,n.jsxs(e.span,{"data-line":"",children:[n.jsx(e.span,{style:{color:"#D73A49"},children:"import"}),n.jsx(e.span,{style:{color:"#24292E"},children:" rawBody "}),n.jsx(e.span,{style:{color:"#D73A49"},children:"from"}),n.jsx(e.span,{style:{color:"#032F62"},children:" 'fastify-raw-body'"})]}),`
`,n.jsx(e.span,{"data-line":"",children:n.jsx(e.span,{style:{color:"#6A737D"},children:"// apply() installs Vike's middlewares onto the server"})}),`
`,n.jsxs(e.span,{"data-line":"",children:[n.jsx(e.span,{style:{color:"#D73A49"},children:"import"}),n.jsx(e.span,{style:{color:"#24292E"},children:" { apply } "}),n.jsx(e.span,{style:{color:"#D73A49"},children:"from"}),n.jsx(e.span,{style:{color:"#032F62"},children:" 'vike-server/fastify'"})]}),`
`,n.jsx(e.span,{"data-line":"",children:n.jsx(e.span,{style:{color:"#6A737D"},children:"// serve() allows a unique file to target Node.js, Cloudflare, Vercel, Deno, Bun, etc..."})}),`
`,n.jsxs(e.span,{"data-line":"",children:[n.jsx(e.span,{style:{color:"#D73A49"},children:"import"}),n.jsx(e.span,{style:{color:"#24292E"},children:" { serve } "}),n.jsx(e.span,{style:{color:"#D73A49"},children:"from"}),n.jsx(e.span,{style:{color:"#032F62"},children:" 'vike-server/fastify/serve'"})]}),`
`,n.jsx(e.span,{"data-line":"",children:" "}),`
`,n.jsxs(e.span,{"data-line":"",children:[n.jsx(e.span,{style:{color:"#D73A49"},children:"async"}),n.jsx(e.span,{style:{color:"#D73A49"},children:" function"}),n.jsx(e.span,{style:{color:"#6F42C1"},children:" startServer"}),n.jsx(e.span,{style:{color:"#24292E"},children:"() {"})]}),`
`,n.jsxs(e.span,{"data-line":"",children:[n.jsx(e.span,{style:{color:"#D73A49"},children:"  const"}),n.jsx(e.span,{style:{color:"#005CC5"},children:" app"}),n.jsx(e.span,{style:{color:"#D73A49"},children:" ="}),n.jsx(e.span,{style:{color:"#6F42C1"},children:" fastify"}),n.jsx(e.span,{style:{color:"#24292E"},children:"({"})]}),`
`,n.jsx(e.span,{"data-line":"",children:n.jsx(e.span,{style:{color:"#6A737D"},children:"    // /!\\ Mandatory for HMR support"})}),`
`,n.jsxs(e.span,{"data-line":"",children:[n.jsx(e.span,{style:{color:"#24292E"},children:"    forceCloseConnections: "}),n.jsx(e.span,{style:{color:"#005CC5"},children:"true"})]}),`
`,n.jsx(e.span,{"data-line":"",children:n.jsx(e.span,{style:{color:"#24292E"},children:"  })"})}),`
`,n.jsx(e.span,{"data-line":"",children:" "}),`
`,n.jsx(e.span,{"data-line":"",children:n.jsx(e.span,{style:{color:"#6A737D"},children:"  // /!\\ Mandatory for Vike middlewares to operate properly"})}),`
`,n.jsxs(e.span,{"data-line":"",children:[n.jsx(e.span,{style:{color:"#D73A49"},children:"  await"}),n.jsx(e.span,{style:{color:"#24292E"},children:" app."}),n.jsx(e.span,{style:{color:"#6F42C1"},children:"register"}),n.jsx(e.span,{style:{color:"#24292E"},children:"(rawBody)"})]}),`
`,n.jsxs(e.span,{"data-line":"",children:[n.jsx(e.span,{style:{color:"#D73A49"},children:"  await"}),n.jsx(e.span,{style:{color:"#6F42C1"},children:" apply"}),n.jsx(e.span,{style:{color:"#24292E"},children:"(app)"})]}),`
`,n.jsxs(e.span,{"data-line":"",children:[n.jsx(e.span,{style:{color:"#D73A49"},children:"  const"}),n.jsx(e.span,{style:{color:"#005CC5"},children:" port"}),n.jsx(e.span,{style:{color:"#D73A49"},children:" ="}),n.jsx(e.span,{style:{color:"#005CC5"},children:" 3000"})]}),`
`,n.jsx(e.span,{"data-line":"",children:n.jsx(e.span,{style:{color:"#6A737D"},children:"  // port is only used when running on non-serverless environments"})}),`
`,n.jsxs(e.span,{"data-line":"",children:[n.jsx(e.span,{style:{color:"#D73A49"},children:"  return"}),n.jsx(e.span,{style:{color:"#6F42C1"},children:" serve"}),n.jsx(e.span,{style:{color:"#24292E"},children:"(app, { port })"})]}),`
`,n.jsx(e.span,{"data-line":"",children:n.jsx(e.span,{style:{color:"#24292E"},children:"}"})}),`
`,n.jsx(e.span,{"data-line":"",children:" "}),`
`,n.jsxs(e.span,{"data-line":"",children:[n.jsx(e.span,{style:{color:"#D73A49"},children:"export"}),n.jsx(e.span,{style:{color:"#D73A49"},children:" default"}),n.jsx(e.span,{style:{color:"#6F42C1"},children:" startServer"}),n.jsx(e.span,{style:{color:"#24292E"},children:"()"})]})]})})})}),n.jsx(F,{children:n.jsx(e.figure,{"data-rehype-pretty-code-figure":"",children:n.jsx(e.pre,{style:{backgroundColor:"#fff",color:"#24292e"},tabIndex:"0","data-language":"js","data-theme":"github-light",children:n.jsxs(e.code,{"data-language":"js","data-theme":"github-light",style:{display:"grid"},children:[n.jsx(e.span,{"data-line":"",children:n.jsx(e.span,{style:{color:"#6A737D"},children:"// server/index.js"})}),`
`,n.jsx(e.span,{"data-line":"",children:" "}),`
`,n.jsxs(e.span,{"data-line":"",children:[n.jsx(e.span,{style:{color:"#D73A49"},children:"import"}),n.jsx(e.span,{style:{color:"#24292E"},children:" { createApp } "}),n.jsx(e.span,{style:{color:"#D73A49"},children:"from"}),n.jsx(e.span,{style:{color:"#032F62"},children:" 'h3'"})]}),`
`,n.jsx(e.span,{"data-line":"",children:n.jsx(e.span,{style:{color:"#6A737D"},children:"// apply() installs Vike's middlewares onto the server"})}),`
`,n.jsxs(e.span,{"data-line":"",children:[n.jsx(e.span,{style:{color:"#D73A49"},children:"import"}),n.jsx(e.span,{style:{color:"#24292E"},children:" { apply } "}),n.jsx(e.span,{style:{color:"#D73A49"},children:"from"}),n.jsx(e.span,{style:{color:"#032F62"},children:" 'vike-server/h3'"})]}),`
`,n.jsx(e.span,{"data-line":"",children:n.jsx(e.span,{style:{color:"#6A737D"},children:"// serve() allows a unique file to target Node.js, Cloudflare, Vercel, Deno, Bun, etc..."})}),`
`,n.jsxs(e.span,{"data-line":"",children:[n.jsx(e.span,{style:{color:"#D73A49"},children:"import"}),n.jsx(e.span,{style:{color:"#24292E"},children:" { serve } "}),n.jsx(e.span,{style:{color:"#D73A49"},children:"from"}),n.jsx(e.span,{style:{color:"#032F62"},children:" 'vike-server/h3/serve'"})]}),`
`,n.jsx(e.span,{"data-line":"",children:" "}),`
`,n.jsxs(e.span,{"data-line":"",children:[n.jsx(e.span,{style:{color:"#D73A49"},children:"function"}),n.jsx(e.span,{style:{color:"#6F42C1"},children:" startServer"}),n.jsx(e.span,{style:{color:"#24292E"},children:"() {"})]}),`
`,n.jsxs(e.span,{"data-line":"",children:[n.jsx(e.span,{style:{color:"#D73A49"},children:"  const"}),n.jsx(e.span,{style:{color:"#005CC5"},children:" app"}),n.jsx(e.span,{style:{color:"#D73A49"},children:" ="}),n.jsx(e.span,{style:{color:"#6F42C1"},children:" createApp"}),n.jsx(e.span,{style:{color:"#24292E"},children:"()"})]}),`
`,n.jsxs(e.span,{"data-line":"",children:[n.jsx(e.span,{style:{color:"#6F42C1"},children:"  apply"}),n.jsx(e.span,{style:{color:"#24292E"},children:"(app)"})]}),`
`,n.jsxs(e.span,{"data-line":"",children:[n.jsx(e.span,{style:{color:"#D73A49"},children:"  const"}),n.jsx(e.span,{style:{color:"#005CC5"},children:" port"}),n.jsx(e.span,{style:{color:"#D73A49"},children:" ="}),n.jsx(e.span,{style:{color:"#005CC5"},children:" 3000"})]}),`
`,n.jsx(e.span,{"data-line":"",children:n.jsx(e.span,{style:{color:"#6A737D"},children:"  // port is only used when running on non-serverless environments"})}),`
`,n.jsxs(e.span,{"data-line":"",children:[n.jsx(e.span,{style:{color:"#D73A49"},children:"  return"}),n.jsx(e.span,{style:{color:"#6F42C1"},children:" serve"}),n.jsx(e.span,{style:{color:"#24292E"},children:"(app, { port })"})]}),`
`,n.jsx(e.span,{"data-line":"",children:n.jsx(e.span,{style:{color:"#24292E"},children:"}"})}),`
`,n.jsx(e.span,{"data-line":"",children:" "}),`
`,n.jsxs(e.span,{"data-line":"",children:[n.jsx(e.span,{style:{color:"#D73A49"},children:"export"}),n.jsx(e.span,{style:{color:"#D73A49"},children:" default"}),n.jsx(e.span,{style:{color:"#6F42C1"},children:" startServer"}),n.jsx(e.span,{style:{color:"#24292E"},children:"()"})]})]})})})}),n.jsx(F,{children:n.jsx(e.figure,{"data-rehype-pretty-code-figure":"",children:n.jsx(e.pre,{style:{backgroundColor:"#fff",color:"#24292e"},tabIndex:"0","data-language":"js","data-theme":"github-light",children:n.jsxs(e.code,{"data-language":"js","data-theme":"github-light",style:{display:"grid"},children:[n.jsx(e.span,{"data-line":"",children:n.jsx(e.span,{style:{color:"#6A737D"},children:"// server/index.js"})}),`
`,n.jsx(e.span,{"data-line":"",children:" "}),`
`,n.jsxs(e.span,{"data-line":"",children:[n.jsx(e.span,{style:{color:"#D73A49"},children:"import"}),n.jsx(e.span,{style:{color:"#24292E"},children:" { Elysia } "}),n.jsx(e.span,{style:{color:"#D73A49"},children:"from"}),n.jsx(e.span,{style:{color:"#032F62"},children:" 'elysia'"})]}),`
`,n.jsx(e.span,{"data-line":"",children:n.jsx(e.span,{style:{color:"#6A737D"},children:"// apply() installs Vike's middlewares onto the server"})}),`
`,n.jsxs(e.span,{"data-line":"",children:[n.jsx(e.span,{style:{color:"#D73A49"},children:"import"}),n.jsx(e.span,{style:{color:"#24292E"},children:" { apply } "}),n.jsx(e.span,{style:{color:"#D73A49"},children:"from"}),n.jsx(e.span,{style:{color:"#032F62"},children:" 'vike-server/elysia'"})]}),`
`,n.jsx(e.span,{"data-line":"",children:n.jsx(e.span,{style:{color:"#6A737D"},children:"// serve() allows a unique file to target Node.js, Cloudflare, Vercel, Deno, Bun, etc..."})}),`
`,n.jsxs(e.span,{"data-line":"",children:[n.jsx(e.span,{style:{color:"#D73A49"},children:"import"}),n.jsx(e.span,{style:{color:"#24292E"},children:" { serve } "}),n.jsx(e.span,{style:{color:"#D73A49"},children:"from"}),n.jsx(e.span,{style:{color:"#032F62"},children:" 'vike-server/elysia/serve'"})]}),`
`,n.jsx(e.span,{"data-line":"",children:" "}),`
`,n.jsxs(e.span,{"data-line":"",children:[n.jsx(e.span,{style:{color:"#D73A49"},children:"function"}),n.jsx(e.span,{style:{color:"#6F42C1"},children:" startServer"}),n.jsx(e.span,{style:{color:"#24292E"},children:"() {"})]}),`
`,n.jsxs(e.span,{"data-line":"",children:[n.jsx(e.span,{style:{color:"#D73A49"},children:"  const"}),n.jsx(e.span,{style:{color:"#005CC5"},children:" app"}),n.jsx(e.span,{style:{color:"#D73A49"},children:" ="}),n.jsx(e.span,{style:{color:"#6F42C1"},children:" apply"}),n.jsx(e.span,{style:{color:"#24292E"},children:"("}),n.jsx(e.span,{style:{color:"#D73A49"},children:"new"}),n.jsx(e.span,{style:{color:"#6F42C1"},children:" Elysia"}),n.jsx(e.span,{style:{color:"#24292E"},children:"())"})]}),`
`,n.jsxs(e.span,{"data-line":"",children:[n.jsx(e.span,{style:{color:"#D73A49"},children:"  const"}),n.jsx(e.span,{style:{color:"#005CC5"},children:" port"}),n.jsx(e.span,{style:{color:"#D73A49"},children:" ="}),n.jsx(e.span,{style:{color:"#005CC5"},children:" 3000"})]}),`
`,n.jsx(e.span,{"data-line":"",children:n.jsx(e.span,{style:{color:"#6A737D"},children:"  // port is only used when running on non-serverless environments"})}),`
`,n.jsxs(e.span,{"data-line":"",children:[n.jsx(e.span,{style:{color:"#D73A49"},children:"  return"}),n.jsx(e.span,{style:{color:"#6F42C1"},children:" serve"}),n.jsx(e.span,{style:{color:"#24292E"},children:"(app, { port })"})]}),`
`,n.jsx(e.span,{"data-line":"",children:n.jsx(e.span,{style:{color:"#24292E"},children:"}"})}),`
`,n.jsx(e.span,{"data-line":"",children:" "}),`
`,n.jsxs(e.span,{"data-line":"",children:[n.jsx(e.span,{style:{color:"#D73A49"},children:"export"}),n.jsx(e.span,{style:{color:"#D73A49"},children:" default"}),n.jsx(e.span,{style:{color:"#6F42C1"},children:" startServer"}),n.jsx(e.span,{style:{color:"#24292E"},children:"()"})]})]})})})})]}),`
`,n.jsx("h2",{id:"deployment",children:"Deployment"}),`
`,n.jsxs(e.p,{children:["In order to deploy, publish ",n.jsx(e.code,{children:"dist/"})," to production and execute ",n.jsx(e.code,{children:"dist/server/index.js"}),"."]}),`
`,n.jsxs(e.blockquote,{children:[`
`,n.jsx(e.p,{children:"We're currently working on out-of-the-box support for Cloudflare and Vercel (ETA the next couple of weeks). In the meantime, see:"}),`
`,n.jsxs(e.ul,{children:[`
`,n.jsxs(e.li,{children:[`
`,n.jsx(y,{href:"/vercel"}),`
`]}),`
`,n.jsxs(e.li,{children:[`
`,n.jsx(y,{href:"/cloudflare-pages"}),`
`]}),`
`,n.jsxs(e.li,{children:[`
`,n.jsx(y,{href:"/cloudflare-workers"}),`
`]}),`
`]}),`
`]}),`
`,n.jsxs("h2",{id:"custom-pagecontext",children:["Custom ",n.jsx("code",{children:"pageContext"})]}),`
`,n.jsxs(e.p,{children:["To define ",n.jsxs(y,{href:"/pageContext#custom",children:["custom ",n.jsx(e.code,{children:"pageContext"})]})," properties:"]}),`
`,n.jsx(e.figure,{"data-rehype-pretty-code-figure":"",children:n.jsx(e.pre,{style:{backgroundColor:"#fff",color:"#24292e"},tabIndex:"0","data-language":"ts","data-theme":"github-light",children:n.jsxs(e.code,{"data-language":"ts","data-theme":"github-light",style:{display:"grid"},children:[n.jsxs(e.span,{"data-line":"",children:[n.jsx(e.span,{style:{color:"#6F42C1"},children:"apply"}),n.jsx(e.span,{style:{color:"#24292E"},children:"(app, {"})]}),`
`,n.jsxs(e.span,{"data-line":"",children:[n.jsx(e.span,{style:{color:"#6F42C1"},children:"  pageContext"}),n.jsx(e.span,{style:{color:"#24292E"},children:"("}),n.jsx(e.span,{style:{color:"#E36209"},children:"runtime"}),n.jsx(e.span,{style:{color:"#24292E"},children:") {"})]}),`
`,n.jsxs(e.span,{"data-line":"",children:[n.jsx(e.span,{style:{color:"#D73A49"},children:"    return"}),n.jsx(e.span,{style:{color:"#24292E"},children:" {"})]}),`
`,n.jsx(e.span,{"data-line":"",children:n.jsx(e.span,{style:{color:"#24292E"},children:"      user: runtime.req.user"})}),`
`,n.jsx(e.span,{"data-line":"",children:n.jsx(e.span,{style:{color:"#24292E"},children:"    }"})}),`
`,n.jsx(e.span,{"data-line":"",children:n.jsx(e.span,{style:{color:"#24292E"},children:"  }"})}),`
`,n.jsx(e.span,{"data-line":"",children:n.jsx(e.span,{style:{color:"#24292E"},children:"})"})})]})})}),`
`,n.jsxs(e.blockquote,{children:[`
`,n.jsxs(e.p,{children:["The ",n.jsx(e.code,{children:"runtime"})," object is a ",n.jsx(e.a,{href:"https://universal-middleware.dev/reference/runtime-adapter",children:n.jsx(e.code,{children:"RuntimeAdapter"})})," (",n.jsx(e.code,{children:"vike-server"})," uses ",n.jsx(e.a,{href:"https://universal-middleware.dev/",children:"universal-middleware"})," under the hood)."]}),`
`]}),`
`,n.jsxs(e.blockquote,{children:[`
`,n.jsxs(e.p,{children:["The ",n.jsx(e.code,{children:"runtime"})," object is also available at ",n.jsx(e.code,{children:"pageContext.runtime"}),". Consequently, you don't necessarily need to use the ",n.jsx(e.code,{children:"pageContext"}),` function above
in order to retrieve information, such as `,n.jsx(e.code,{children:"pageContext.runtime.req.user"}),", in Vike hooks and UI components (see ",n.jsx(y,{href:"/usePageContext"}),")."]}),`
`]}),`
`,n.jsx("br",{}),`
`,n.jsx("h2",{id:"standalone",children:"Standalone"}),`
`,n.jsxs(e.p,{children:["With ",n.jsx(e.code,{children:"standalone: true"}),", the build output directory (",n.jsx(e.a,{href:"https://vite.dev/config/build-options.html#build-outdir",children:n.jsx(e.code,{children:"dist/"})}),") contains everything needed for deployment. This means that, in production, only the ",n.jsx(e.code,{children:"dist/"})," directory is required (you can remove ",n.jsx(e.code,{children:"node_modules/"})," and skip ",n.jsx(e.code,{children:"$ npm install"}),")."]}),`
`,n.jsx(Ee,{children:n.jsx(e.p,{children:"This feature is experimental and may break upon any version update."})}),`
`,n.jsxs(e.blockquote,{children:[`
`,n.jsxs(e.p,{children:["If the production code built with ",n.jsx(e.code,{children:"standalone: true"})," fails to run with errors like ",n.jsx(e.code,{children:"ENOENT: no such file or directory"}),`, then disable standalone mode or replace
the npm package throwing the error with another npm package. (The issue is that some npm package have dependencies that aren't explicit and, consequently, cannot be statically analyzed to be included in the bundle.)`]}),`
`]}),`
`,n.jsx(e.figure,{"data-rehype-pretty-code-figure":"",children:n.jsx(e.pre,{style:{backgroundColor:"#fff",color:"#24292e"},tabIndex:"0","data-language":"js","data-theme":"github-light",children:n.jsxs(e.code,{"data-language":"js","data-theme":"github-light",style:{display:"grid"},children:[n.jsx(e.span,{"data-line":"",children:n.jsx(e.span,{style:{color:"#6A737D"},children:"// +config.js"})}),`
`,n.jsx(e.span,{"data-line":"",children:" "}),`
`,n.jsxs(e.span,{"data-line":"",children:[n.jsx(e.span,{style:{color:"#D73A49"},children:"import"}),n.jsx(e.span,{style:{color:"#24292E"},children:" vikeServer "}),n.jsx(e.span,{style:{color:"#D73A49"},children:"from"}),n.jsx(e.span,{style:{color:"#032F62"},children:" 'vike-server/config'"})]}),`
`,n.jsx(e.span,{"data-line":"",children:" "}),`
`,n.jsxs(e.span,{"data-line":"",children:[n.jsx(e.span,{style:{color:"#D73A49"},children:"export"}),n.jsx(e.span,{style:{color:"#D73A49"},children:" const"}),n.jsx(e.span,{style:{color:"#005CC5"},children:" config"}),n.jsx(e.span,{style:{color:"#D73A49"},children:" ="}),n.jsx(e.span,{style:{color:"#24292E"},children:" {"})]}),`
`,n.jsx(e.span,{"data-line":"",children:n.jsx(e.span,{style:{color:"#6A737D"},children:"  // ..."})}),`
`,n.jsx(e.span,{"data-line":"",children:n.jsx(e.span,{style:{color:"#24292E"},children:"  extends: [vikeServer],"})}),`
`,n.jsx(e.span,{"data-line":"",children:n.jsx(e.span,{style:{color:"#24292E"},children:"  server: {"})}),`
`,n.jsxs(e.span,{"data-line":"",children:[n.jsx(e.span,{style:{color:"#24292E"},children:"    entry: "}),n.jsx(e.span,{style:{color:"#032F62"},children:"'server/index.js'"}),n.jsx(e.span,{style:{color:"#24292E"},children:","})]}),`
`,n.jsxs(e.span,{"data-line":"",children:[n.jsx(e.span,{style:{color:"#24292E"},children:"    standalone: "}),n.jsx(e.span,{style:{color:"#005CC5"},children:"true"})]}),`
`,n.jsx(e.span,{"data-line":"",children:n.jsx(e.span,{style:{color:"#24292E"},children:"  }"})}),`
`,n.jsx(e.span,{"data-line":"",children:n.jsx(e.span,{style:{color:"#24292E"},children:"}"})})]})})}),`
`,n.jsx(e.p,{children:"Options:"}),`
`,n.jsx(e.figure,{"data-rehype-pretty-code-figure":"",children:n.jsx(e.pre,{style:{backgroundColor:"#fff",color:"#24292e"},tabIndex:"0","data-language":"js","data-theme":"github-light",children:n.jsxs(e.code,{"data-language":"js","data-theme":"github-light",style:{display:"grid"},children:[n.jsxs(e.span,{"data-line":"",children:[n.jsx(e.span,{style:{color:"#D73A49"},children:"export"}),n.jsx(e.span,{style:{color:"#D73A49"},children:" const"}),n.jsx(e.span,{style:{color:"#005CC5"},children:" config"}),n.jsx(e.span,{style:{color:"#D73A49"},children:" ="}),n.jsx(e.span,{style:{color:"#24292E"},children:" {"})]}),`
`,n.jsx(e.span,{"data-line":"",children:n.jsx(e.span,{style:{color:"#6A737D"},children:"  // ..."})}),`
`,n.jsx(e.span,{"data-line":"",children:n.jsx(e.span,{style:{color:"#24292E"},children:"  extends: [vikeServer],"})}),`
`,n.jsx(e.span,{"data-line":"",children:n.jsx(e.span,{style:{color:"#24292E"},children:"  server: {"})}),`
`,n.jsxs(e.span,{"data-line":"",children:[n.jsx(e.span,{style:{color:"#24292E"},children:"    entry: "}),n.jsx(e.span,{style:{color:"#032F62"},children:"'server/index.js'"}),n.jsx(e.span,{style:{color:"#24292E"},children:","})]}),`
`,n.jsx(e.span,{"data-line":"",children:n.jsx(e.span,{style:{color:"#24292E"},children:"    standalone: {"})}),`
`,n.jsx(e.span,{"data-line":"",children:n.jsx(e.span,{style:{color:"#24292E"},children:"      esbuild: {"})}),`
`,n.jsxs(e.span,{"data-line":"",children:[n.jsx(e.span,{style:{color:"#24292E"},children:"        minify: "}),n.jsx(e.span,{style:{color:"#005CC5"},children:"true"}),n.jsx(e.span,{style:{color:"#24292E"},children:","})]}),`
`,n.jsx(e.span,{"data-line":"",children:n.jsx(e.span,{style:{color:"#6A737D"},children:"        // ... or any other esbuild option"})}),`
`,n.jsx(e.span,{"data-line":"",children:n.jsx(e.span,{style:{color:"#24292E"},children:"      }"})}),`
`,n.jsx(e.span,{"data-line":"",children:n.jsx(e.span,{style:{color:"#24292E"},children:"    }"})}),`
`,n.jsx(e.span,{"data-line":"",children:n.jsx(e.span,{style:{color:"#24292E"},children:"  }"})}),`
`,n.jsx(e.span,{"data-line":"",children:n.jsx(e.span,{style:{color:"#24292E"},children:"}"})})]})})}),`
`,n.jsxs(e.blockquote,{children:[`
`,n.jsxs(e.p,{children:["Instead of using ",n.jsx(e.code,{children:"standalone: true"}),", we recommend tools such as ",n.jsx(e.a,{href:"https://pnpm.io/cli/deploy",children:n.jsx(e.code,{children:"pnpm deploy --prod"})}),`.
This provides better control over packed files and ensures greater compatibility.`]}),`
`]}),`
`,n.jsx("h2",{id:"compression",children:"Compression"}),`
`,n.jsxs(e.p,{children:["In production, ",n.jsx(e.code,{children:"vike-server"})," compresses all Vike responses."]}),`
`,n.jsx(e.p,{children:"You can disable it:"}),`
`,n.jsx(e.figure,{"data-rehype-pretty-code-figure":"",children:n.jsx(e.pre,{style:{backgroundColor:"#fff",color:"#24292e"},tabIndex:"0","data-language":"js","data-theme":"github-light",children:n.jsxs(e.code,{"data-language":"js","data-theme":"github-light",style:{display:"grid"},children:[n.jsxs(e.span,{"data-line":"",children:[n.jsx(e.span,{style:{color:"#6F42C1"},children:"apply"}),n.jsx(e.span,{style:{color:"#24292E"},children:"(app, {"})]}),`
`,n.jsxs(e.span,{"data-line":"",children:[n.jsx(e.span,{style:{color:"#24292E"},children:"  compress: "}),n.jsx(e.span,{style:{color:"#005CC5"},children:"false"})]}),`
`,n.jsx(e.span,{"data-line":"",children:n.jsx(e.span,{style:{color:"#24292E"},children:"})"})})]})})}),`
`,n.jsx("h2",{id:"https",children:"HTTPS"}),`
`,n.jsx(e.p,{children:"In production, Vike is just a server middleware — there is nothing to take into consideration."}),`
`,n.jsxs(e.p,{children:["If you want to use HTTPS in development as well, then make sure to ",n.jsx(e.a,{href:"https://vitejs.dev/config/server-options.html#server-https",children:"pass the HTTPS certificates to Vite's dev server"}),"."]}),`
`,n.jsx("h2",{id:"see-also",children:"See also"}),`
`,n.jsxs(e.ul,{children:[`
`,n.jsxs(e.li,{children:[`
`,n.jsx(y,{href:"/integration#server-manual-integration",doNotInferSectionTitle:!0}),`
`]}),`
`,n.jsxs(e.li,{children:[`
`,n.jsx(y,{href:"/integration#non-javascript-backend",doNotInferSectionTitle:!0}),`
`]}),`
`,n.jsxs(e.li,{children:[`
`,n.jsx(y,{href:"/renderPage"}),`
`]}),`
`]})]})}function Qe(s={}){const{wrapper:e}=s.components||{};return e?n.jsx(e,{...s,children:n.jsx(oe,{...s})}):oe(s)}const Ze=Object.freeze(Object.defineProperty({__proto__:null,default:Qe,pageSectionsExport:Je},Symbol.toStringTag,{value:"Module"})),jn={isClientRuntimeLoaded:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:!0}},onBeforeRenderEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:{server:!0}}},dataEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},onRenderClient:{type:"standard",definedAtData:{filePathToShowToUser:"@brillout/docpress/renderer/onRenderClient",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:ve}},Page:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/server/+Page.mdx",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:Ze}},hydrationCanBeAborted:{type:"standard",definedAtData:{filePathToShowToUser:"@brillout/docpress/config",fileExportPathToShowToUser:["default","hydrationCanBeAborted"]},valueSerialized:{type:"js-serialized",value:!0}},Layout:{type:"standard",definedAtData:{filePathToShowToUser:"@brillout/docpress/Layout",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:be}},TopNavigation:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/+TopNavigation.tsx",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:me}}};export{jn as configValuesSerialized};
